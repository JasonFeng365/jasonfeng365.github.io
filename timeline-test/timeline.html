<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Horizontal Timeline with Hover/Click Effects</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  
	<script src="funminesweeper/minesweeper.js"></script>
	<script src="funminesweeper/minesweeperui.js"></script>
	<script src="funminesweeper/minesweepersolve.js"></script>
	<script src="funminesweeper/minesweepermain.js"></script>

<style>
  .timeline-scroll-container {
    display: flex;
	flex-direction: column;
    overflow-x: auto;
    white-space: nowrap;
    padding: 0.5rem;
  }

  .timeline-container {
	/* flex-grow: 1; */
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 0;
    /* position: relative; */
    min-width: 100%;
    height: 2.5rem;
    background-color: #f0f0f0;
    border: 1px solid #ccc;
    margin-top: 0.2rem;
    padding: 0.2rem;
  }

  .org-label {
	position: absolute;
    font-weight: bold;
    font-size: 1.2rem;
    min-width: 150px;
    z-index: 1;
  }

  .timeline-events {
    position: relative;
    width: 100%;
    height: 100%;
  }

 
  .timeline-event,
  .timeline-event-point {
    position: absolute;
    /* top: 0%; */
    background-color: red;
	border-style: solid;
	border-color: white;
    color: white;
    padding: 0.2rem 0.5rem;
    border-radius: .5rem;
    /* white-space: nowrap; */
    font-size: 0.9rem;
    transition: transform 0.2s, opacity 0.2s;
    opacity: 0.9;
  }

  .timeline-event-point {
	opacity: .8;
  }

.timeline-event-point:hover,
.timeline-event-point.selected {
	transform: scale(1.2);
	opacity: 1;
}

.timeline-event-point span {
	font-size: 0.7rem;
	color: white;
	white-space: nowrap;
}

  .timeline-event:hover,
  .timeline-event.selected {
    /* transform: scaleY(1.3); */
	transform: scale(1.03);
    opacity: 1;
  }

  .timeline-axis {
    position: relative;
    width: 100%;
    height: 50px;
    margin-top: 0.5rem;
  }

  .timeline-axis-line {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: #ccc;
  }

  .timeline-axis-labels {
    position: absolute;
    top: 20px;
    left: 0;
    width: 100%;
    font-size: 0.8rem;
    color: #666;
    white-space: nowrap;
    text-align: center;
  }


    .dropdown {
      /* position: relative;
      display: inline-block; */
    }

    .dropdown-content {
      position: absolute;
      top: auto;
      background: white;
      min-width: 160px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      opacity: 0;
      transform: translateY(-10px);
      transition: all 0.3s;
      pointer-events: none;
      border-radius: 0.5rem;
	  z-index: 2;
    }

    .dropdown:hover .dropdown-content {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    .dropdown-content a {
      color: #374151;
      padding: 0.5rem 1rem;
      text-decoration: none;
      display: block;
    }

    .dropdown-content a:hover {
      background: #f3f4f6;
    }

	.popover{
    max-width: 30rem; /* Max Width of the popover (depending on the container!) */
}

/* .interval-label:hover,
.interval-label.selected {
	transform: scaleY(.769);
} */

.interval-label {
	overflow: hidden;
	white-space: nowrap;
	/* display: inline-block; */
}

.future-overlay {
  position: absolute;
    top: 0; /* Align to the top of the container */
	/* width: 50%; */
    right: 0; /* Align to the right side initially */
    height: 100%; /* Cover the full height of the container */
    background-color: rgba(0, 0, 0, 0.2); /* Semi-transparent black background */
    z-index: 10; /* Ensure it is above other content */
	pointer-events: none;
}

.overall-container {
	position: relative;
}

.ignoremouse {
	pointer-events: none;
	user-select: none;
}


  [v-cloak] {
    display: none;
  }
</style>

</head>
<body>
<div id="app" v-cloak>

	
  <!-- Scrollable container for all timeline rows -->

  <div class="container-fluid">

	<div class="overall-container">
	

	<!-- <div class="timeline-scroll-container"> -->
		<div class="timeline-container" v-for="org in timelines" :key="org.name"
			:style="{
				'background-color': org.backgroundColor
			}"
		>
		
		<div class="timeline-events">
			<!-- :title="entry.title" -->
			<!-- data-bs-trigger="focus"  -->
			<div
				v-for="entry in [...getIntervals(org), ...getPoints(org)]"
				:key="entry.type + entry.start || entry.date"
				

				data-bs-toggle="modal" data-bs-target="#exampleModal"
				
			>
			<button
				:style="{
					left: entry.type === 'interval' ? entry.startPercent + '%' : entry.datePercent + '%',
					width: entry.type === 'interval' ? entry.widthPercent + '%' : '0%',
					'background-color': entry.backgroundColor,
					color: entry.type === 'interval' ? entry.intervalColor : entry.pointColor,
				}"
				@click="selectEntry(entry)"
				class="dropdown text-start interval-label"
				:class="{ 
					'selected': entry.selected,
					'timeline-event': entry.type === 'interval',
					'timeline-event-point': entry.type !== 'interval'
				}"
				data-bs-trigger="hover" data-bs-toggle="popover" data-bs-placement="top"
				data-bs-html="true"
				
				:data-bs-content='genPopoverTemplate(entry)'
			
			>

			<!-- {{entry.type === 'interval' ? entry.caption : ""}} -->

				<!-- Interval label -->
				<!-- <span v-if="entry.type === 'interval'" class="interval-label">{{ entry.start }} - {{ entry.end }}</span > -->
				<span class="ignoremouse" v-if="entry.type === 'interval'">{{ entry.caption }}</span >
				<!-- Point label -->
				<!-- <span v-else>{{ entry.date }}</span >-->
				<span class="ignoremouse" v-else>&nbsp;</span>
				<!-- <a type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">Open Modal</a> -->

				<!-- <div class="dropdown-content">
					<h1>HELLO WORLD</h1>
				</div> -->

			</button>
				
			</div>
		<div class="future-overlay text-end text-white":style="{width: percentOfFuture+'%'}"></div>
		</div>

		</div>
		
		<!-- Axis below all rows -->
		<div class="timeline-axis">
			<div class="timeline-axis-line"></div>
			<div class="timeline-axis-labels"></div>
		</div>

		
	</div>
  </div>

    <!-- <a type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal">Open Modal</a> -->

    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header modal-title" id="myModalLabel">
            <div class="modal-title" id="myModalLabel">
				<h5>{{selectedEntry.caption}}: {{selectedEntry.title}}</h5>
				<p class="card-text">{{genTimeframeText(selectedEntry)}}</p>
			</div>
			
          </div>	
		  
          <div class="modal-body">
			<p style="white-space: pre-wrap;">{{selectedEntry.description}}</p>
			<div v-if="selectedEntry.imageUrls.length>0" v-html="getCurrentImageCarousel()"></div>

			<div v-if="selectedEntry.urls.length>0" class="card-footer text-muted">
				<br>
				<div v-for="url in selectedEntry.urls" class="card-link"><a :href="url.url" target="_blank">{{url.title}}</a></div>
			</div>
          </div>

        </div>
      </div>
    </div>

</div>

  <!-- Vue.js -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
  <script src="timeline.js"></script>

  <!-- Enable popovers -->
  <script>
	// https://stackoverflow.com/questions/66899307/bootstrap-5-popover-with-html-content ?
	var popoverTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]'))
	var popoverList = popoverTriggerList.map(function (popoverTriggerEl) {
		return new bootstrap.Popover(popoverTriggerEl)
	})
  </script>
</body>
</html>
